<!doctype html>
<html>
<head>
  <title>jQuery Testing</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>  
<body>
  <h1>Get Weather</h1>
  <input type="text" placeholder="00000" id="zipcode">
  <input type="button" value="Temp" onclick="loadDoc(myFunction)">
  <script>
    function loadDoc(cFunction) {
      var zipcode = $("#zipcode").val();
      var url = "https://query.yahooapis.com/v1/public/yql?q=select * from weather.forecast where woeid in (select woeid from geo.places(1) where text='" + zipcode + "')&format=json&callback=callbackFunction";
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          cFunction(this);    
        }  
      };  
      xhttp.open("GET",url, true);  
      xhttp.send();
    }
    
    function myFunction(xhttp) {
      var data = JSON.parse(xhttp.responseText.substring(21,xhttp.responseText.length-2));
      var temp = data.query.results.channel.item.condition.temp;
      var city = data.query.results.channel.location.city;
      var state = data.query.results.channel.location.region;
      alert(city + ", " + state + "\nTemp: " + temp);
    }
  </script>  
</body>
</html>
